{
  "question_name": "maximum-frequency-of-an-element-after-performing-operations-ii",
  "problem_metadata": {
    "questionId": "3640",
    "title": "Maximum Frequency of an Element After Performing Operations II",
    "titleSlug": "maximum-frequency-of-an-element-after-performing-operations-ii",
    "content": "<p>You are given an integer array <code>nums</code> and two integers <code>k</code> and <code>numOperations</code>.</p>\n\n<p>You must perform an <strong>operation</strong> <code>numOperations</code> times on <code>nums</code>, where in each operation you:</p>\n\n<ul>\n\t<li>Select an index <code>i</code> that was <strong>not</strong> selected in any previous operations.</li>\n\t<li>Add an integer in the range <code>[-k, k]</code> to <code>nums[i]</code>.</li>\n</ul>\n\n<p>Return the <strong>maximum</strong> possible <span data-keyword=\"frequency-array\">frequency</span> of any element in <code>nums</code> after performing the <strong>operations</strong>.</p>\n\n<p>&nbsp;</p>\n<p><strong class=\"example\">Example 1:</strong></p>\n\n<div class=\"example-block\">\n<p><strong>Input:</strong> <span class=\"example-io\">nums = [1,4,5], k = 1, numOperations = 2</span></p>\n\n<p><strong>Output:</strong> <span class=\"example-io\">2</span></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>We can achieve a maximum frequency of two by:</p>\n\n<ul>\n\t<li>Adding 0 to <code>nums[1]</code>, after which <code>nums</code> becomes <code>[1, 4, 5]</code>.</li>\n\t<li>Adding -1 to <code>nums[2]</code>, after which <code>nums</code> becomes <code>[1, 4, 4]</code>.</li>\n</ul>\n</div>\n\n<p><strong class=\"example\">Example 2:</strong></p>\n\n<div class=\"example-block\">\n<p><strong>Input:</strong> <span class=\"example-io\">nums = [5,11,20,20], k = 5, numOperations = 1</span></p>\n\n<p><strong>Output:</strong> <span class=\"example-io\">2</span></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>We can achieve a maximum frequency of two by:</p>\n\n<ul>\n\t<li>Adding 0 to <code>nums[1]</code>.</li>\n</ul>\n</div>\n\n<p>&nbsp;</p>\n<p><strong>Constraints:</strong></p>\n\n<ul>\n\t<li><code>1 &lt;= nums.length &lt;= 10<sup>5</sup></code></li>\n\t<li><code>1 &lt;= nums[i] &lt;= 10<sup>9</sup></code></li>\n\t<li><code>0 &lt;= k &lt;= 10<sup>9</sup></code></li>\n\t<li><code>0 &lt;= numOperations &lt;= nums.length</code></li>\n</ul>\n",
    "difficulty": "Hard",
    "stats": "{\"totalAccepted\": \"66.3K\", \"totalSubmission\": \"122.9K\", \"totalAcceptedRaw\": 66260, \"totalSubmissionRaw\": 122923, \"acRate\": \"53.9%\"}",
    "topicTags": [
      {
        "name": "Array",
        "slug": "array",
        "translatedName": null
      },
      {
        "name": "Binary Search",
        "slug": "binary-search",
        "translatedName": null
      },
      {
        "name": "Sliding Window",
        "slug": "sliding-window",
        "translatedName": null
      },
      {
        "name": "Sorting",
        "slug": "sorting",
        "translatedName": null
      },
      {
        "name": "Prefix Sum",
        "slug": "prefix-sum",
        "translatedName": null
      }
    ],
    "hints": [
      "The optimal values to check are <code>nums[i] - k</code>, <code>nums[i]</code>, and <code>nums[i] + k</code>."
    ]
  },
  "submissions": [
    {
      "id": "1808325635",
      "statusDisplay": "Accepted",
      "lang": {
        "name": "python3",
        "verboseName": "Python3"
      },
      "runtime": 1180,
      "memory": 63280000,
      "timestamp": 1761120827,
      "title": "Maximum Frequency of an Element After Performing Operations II",
      "titleSlug": "maximum-frequency-of-an-element-after-performing-operations-ii",
      "runtimeDisplay": "1180 ms",
      "runtimePercentile": 32.021200000000015,
      "memoryDisplay": "63.3 MB",
      "memoryPercentile": 21.183399999999942,
      "code": "class Solution:\n    def maxFrequency(self, nums: List[int], k: int, numOperations: int) -> int:\n        count = Counter(nums)                   # solution 1: line sweep, TC = O(nlogn)\n        presum = defaultdict(int)\n        for x in count:                 # line sweep\n            presum[x-k] += count[x]\n            presum[x+k+1] -= count[x]\n        keys = sorted(presum.keys() | count.keys())     # search all possible keys\n        ans, total = 0, 0\n        for x in keys:\n            total += presum[x]                          # maximum frequency for x\n            ops = min(total-count[x], numOperations)    # number of operations bounded by numOperations\n            ans = max(ans, count[x] + ops)              # update ans\n        return ans\n\n\n\n\n        # nums.sort()                     # solution 2: binary search, TLE!!!\n        # count = Counter(nums)\n        # keys = sorted(count.keys())\n        # ans = 0\n        # for i in range(len(keys)):\n        #     opset = {keys[i]}\n        #     if i < len(keys) - 1:\n        #         opset |= set(list(range(max(keys[i]+1, keys[i+1]-k), min(keys[i]+k, keys[i+1]-1) + 1)))\n        #     for x in opset:\n        #         left = bisect_left(nums, x) - bisect_left(nums, x-k)            # [x-k..x-1]\n        #         right = bisect_right(nums, x+k) - bisect_right(nums, x)         # [x+1..x+k]\n        #         cur = count[x] if x in count else 0\n        #         cur += min(left+right, numOperations)\n        #         ans = max(ans, cur)\n        # return ans",
      "statusCode": 10,
      "user": {
        "username": "saachinnnnn",
        "profile": {
          "realName": "Iam4ari"
        }
      },
      "question": {
        "questionId": "3640",
        "titleSlug": "maximum-frequency-of-an-element-after-performing-operations-ii",
        "hasFrontendPreview": false
      },
      "notes": "",
      "flagType": "WHITE",
      "topicTags": [],
      "runtimeError": null,
      "compileError": null
    }
  ]
}